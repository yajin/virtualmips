#summary How to run pavo LCD emulation

= Introduction =

Since version 0.04, VirtualMIPS emulates LCD controller and touch screen for JZ4740. You can test and run your GUI application(QT/GTK for example) in VirtualMIPS. 

The emulation speed of LCD emulation is slow, please be patient. It will be improved in next release using JIT.

= Build VirtualMIPS =

Build VirtualMIPS with lcd support. LibSDL is needed in LCD emulation. Please install it before building VirtualMIPS.

{{{
#cd virtualmips-${version}/build
#scons pavo
}}}

= Run qtopia in 2.4 kernel =

Copy uImage-2.4 and uboot image into VirtualMIPS.

{{{
cp test_suit-${version}/pavo/u-boot-nand.bin  virtualmips-${version}/build
cp test_suit-${version}/pavo/uImage-2.4  virtualmips-${version}/build
}}}

Make yaffs2 root filesystem. You need to download [ftp://ftp.ingenic.cn/3sw/01linux/03root/rootfs-20080409.tgz rootfs for pavo]from JZ's website first.

{{{
tar zxvf rootfs-20080409.tgz
cd rootfs-20080409
mkyaffs2image 1 root24 root.yaffs2
}}}

Make nand falsh image with uboot/kernel/rootfs.

{{{
cp rootfs-20080409/root.yaffs2  virtualmips-${version}/build
cd virtualmips-${version}/build
./mknandflash
}}}

Run pavo.

{{{
virtualmips-${version}/build
./pavo
}}}

When you enter linux 2.4 shell. Type 'runqpe'.

{{{
# runqpe
}}}

[http://virtualmips.googlecode.com/svn/wiki/img/system-info.jpg]

= Run qtopia in 2.6 kernel =

Run qtopia in 2.6 is similiar with in 2.4 kernel. The difference is that JZ does not provide qtopia for linux 2.6 kernel. But donot worry. Just copy the qtopia for linux 2.4 rootfs to linux 2.6 rootfs.
{{{
cd rootfs-20080409
cp -rf root24/opt/* root26/opt/
mkyaffs2image 1 root26 root.yaffs2
}}}

Copy it to VirtualMIPS

{{{
cp rootfs-20080409/root.yaffs2  virtualmips-${version}/build
}}}

Chage the nandflash.conf in virtualmips-${version}/build and make nandflash image.

{{{
kernel_startaddress=0x400000
kernel_file="uImage-2.6"  ##Makesure this value is your linux 2.6 kernel.
kernel_has_spare=0
}}}

{{{
cd virtualmips-${version}/build
./mknandflash
}}}

Run pavo.

{{{
virtualmips-${version}/build
./pavo
}}}

When you enter linux 2.6 shell. Type 'runqpe'.

{{{
# runqpe
}}}

[http://virtualmips.googlecode.com/svn/wiki/img/system-info26.jpg]

= Calibrate touchscreen in qtopia =

Do not forget to calibrate touchscreen in qtopia before playing with it.
Settings->recalibrate

[http://virtualmips.googlecode.com/svn/wiki/img/calibrate.jpg]


= Links =

 * [UserManual How to build VirtualMIPS]
 * [pavonetwork How to use network in pavo emulation]